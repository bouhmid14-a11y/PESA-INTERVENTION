<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PESA Intervention</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body{font-family:Arial;padding:20px;background:#f4f6f9}
button{padding:12px 20px;background:#1f4ed8;color:white;border:none;border-radius:8px}
.card{background:white;padding:15px;margin-top:10px;border-radius:10px}
</style>
</head>

<body>

<h2>PESA Intervention</h2>
<button onclick="ajouter()">+ Ajouter intervention</button>

<div id="list"></div>

<script>
const supabase = window.supabase.createClient(
"https://gdwwbwymcoolbjfzmqeq.supabase.co",
"sb_publishable_NT8hPP9TDUIH0SCnQa0XQw_UXdWELAl"
);

async function ajouter(){
const station = prompt("Station ?");
const tech = prompt("Technicien ?");
if(!station || !tech) return alert("Informations manquantes");

await supabase.from("interventions").insert([{station,tech}]);
charger();
}

async function charger(){
const {data} = await supabase.from("interventions").select("*").order("id",{ascending:false});
document.getElementById("list").innerHTML="";
data.forEach(i=>{
document.getElementById("list").innerHTML += `
<div class="card">
<b>${i.station}</b> - ${i.tech}<br>
${i.statut || "Ouvert"}
</div>`;
});
}

charger();
</script>

</body>
</html>
