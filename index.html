<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>PESA Intervention</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{
  font-family:Arial;
  background:#f4f6f9;
  padding:20px;
}
h1{color:#1e3a8a}
button{
  background:#1e3a8a;
  color:white;
  border:none;
  padding:10px 15px;
  margin:5px;
  border-radius:6px;
}
.card{
  background:white;
  padding:15px;
  border-radius:8px;
  margin-top:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
</style>
</head>

<body>

<h1>PESA Intervention</h1>
<button onclick="ajouter()">+ Ajouter intervention</button>

<div id="list"></div>

<script>
const supabase = window.supabase.createClient(
  "https://gdwwbwymcoolbjfzmqeq.supabase.co",
  "sb_publishable_NT8hPP9TDUIH0SCnQa0XQw_UXdWELAl"
);

async function ajouter(){
  const station = prompt("Station ?");
  const tech = prompt("Technicien ?");
  if(!station || !tech) return;

  await supabase.from("interventions").insert([
    { station, tech, status:"ouvert" }
  ]);

  charger();
}

async function charger(){
  const { data } = await supabase.from("interventions").select("*").order("id",{ascending:false});

  const div = document.getElementById("list");
  div.innerHTML="";

  data.forEach(i=>{
    div.innerHTML += `
      <div class="card">
        <b>INT-${i.id}</b><br>
        Station: ${i.station}<br>
        Tech: ${i.tech}<br>
        Status: ${i.status}
      </div>
    `;
  });
}

charger();
</script>

</body>
</html>
