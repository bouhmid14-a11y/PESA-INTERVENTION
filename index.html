<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PESA Intervention</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{font-family:Arial;padding:20px;background:#f4f6f9}
button{background:#1e3a8a;color:#fff;border:0;padding:12px 18px;border-radius:8px}
.card{background:#fff;margin-top:10px;padding:12px;border-radius:10px}
</style>
</head>

<body>

<h2>PESA Intervention</h2>

<button onclick="ajouter()">+ Ajouter intervention</button>

<div id="list"></div>

<script>
const supabase = window.supabase.createClient(
"https://gdwwbwymcoolbjfzmqeq.supabase.co",
"sb_publishable_NT8hPP9TDUIH0SCnQa0XQw_UXdWELAl"
);

async function ajouter(){
const station = prompt("Station ?");
const tech = prompt("Technicien ?");

if(!station || !tech) return;

await supabase.from("interventions").insert([{station,tech,status:"ouvert"}]);
charger();
}

async function charger(){
const {data} = await supabase.from("interventions").select("*").order("id",{ascending:false});
document.getElementById("list").innerHTML = "";

data.forEach(i=>{
document.getElementById("list").innerHTML += `
<div class="card">
<b>${i.station}</b><br>
Tech: ${i.tech}<br>
Status: ${i.status}
</div>`;
});
}

charger();
</script>

</body>
</html>
